!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("ext/nomnoml/graphre")):"function"==typeof define&&define.amd?define(["exports","ext/nomnoml/graphre"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).nomnoml={},t.graphre)}(this,(function(t, e){"use strict";
    /*! *****************************************************************************
        Copyright (c) Microsoft Corporation.

        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.

        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */function n(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{h(i.next(t))}catch(t){o(t)}}function s(t){try{h(i.throw(t))}catch(t){o(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}h((i=i.apply(t,e||[])).next())}))}function i([t,e],n){for(var i=[],r=0;r<n;r++)i.push(t+(e-t)*r/(n-1));return i}function r(t,e){for(var n=0,i=0,r=t.length;n<r;n++)i+=e(t[n]);return i}function o(t){return t[t.length-1]}function a(t,e){return""===e||!!t&&-1!==t.indexOf(e)}function s(t,e){function n(t,e){for(var n in e)t[n]=e[n]}var i={};return n(i,t),n(i,e),i}function h(t,e){for(var n={},i=0;i<t.length;i++)n[t[i][e]]=t[i];return n}function l(t,e){for(var n={},i=[],r=0;r<t.length;r++){var o=t[r][e];n[o]||(n[o]=!0,i.push(t[r]))}return i}var c=Object.freeze({__proto__:null,range:i,sum:r,find:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]},last:o,hasSubstring:a,merged:s,indexBy:h,uniqueBy:l});function u(t,e,n={}){return{title:{bold:e.bold||!1,underline:e.underline||!1,italic:e.italic||!1,center:e.center||!1},body:{bold:n.bold||!1,underline:n.underline||!1,italic:n.italic||!1,center:n.center||!1},dashed:t.dashed||!1,fill:t.fill||void 0,stroke:t.stroke||void 0,visual:t.visual||"class",direction:t.direction||void 0}}var d={ABSTRACT:u({visual:"class"},{center:!0,italic:!0}),ACTOR:u({visual:"actor"},{center:!0},{center:!0}),CHOICE:u({visual:"rhomb"},{center:!0},{center:!0}),CLASS:u({visual:"class"},{center:!0,bold:!0}),DATABASE:u({visual:"database"},{center:!0,bold:!0},{center:!0}),END:u({visual:"end"},{}),FRAME:u({visual:"frame"},{}),HIDDEN:u({visual:"hidden"},{}),INPUT:u({visual:"input"},{center:!0}),INSTANCE:u({visual:"class"},{center:!0,underline:!0}),LABEL:u({visual:"none"},{center:!0}),LOLLIPOP:u({visual:"lollipop"},{center:!0}),NOTE:u({visual:"note"},{}),PACKAGE:u({visual:"package"},{}),RECEIVER:u({visual:"receiver"},{}),REFERENCE:u({visual:"class",dashed:!0},{center:!0}),SENDER:u({visual:"sender"},{}),SOCKET:u({visual:"socket"},{}),START:u({visual:"start"},{}),STATE:u({visual:"roundrect"},{center:!0}),SYNC:u({visual:"sync"},{center:!0}),TABLE:u({visual:"table"},{center:!0,bold:!0}),TRANSCEIVER:u({visual:"transceiver"},{}),USECASE:u({visual:"ellipse"},{center:!0},{center:!0})};function f(t,e){e.width=Math.max(...e.compartments.map((t=>t.width))),e.height=r(e.compartments,(t=>t.height)),e.dividers=[];var n=0;for(var i of e.compartments)i.x=0,i.y=n,i.width=e.width,n+=i.height,i!=o(e.compartments)&&e.dividers.push([{x:0,y:n},{x:e.width,y:n}])}function y(t,e){e.dividers=[],e.compartments=[],e.width=2.5*t.fontSize,e.height=2.5*t.fontSize}function p(t,e){e.width=1.5*t.fontSize,e.height=1.5*t.fontSize,e.dividers=[];var n="LR"==t.direction?e.height-t.padding:-e.height/2;for(var i of e.compartments)"LR"==t.direction?(i.x=e.width/2-i.width/2,i.y=n):(i.x=e.width/2+t.padding/2,i.y=n),n+=i.height}var g={actor:function(t,e){e.width=Math.max(2*t.padding,...e.compartments.map((t=>t.width))),e.height=3*t.padding+r(e.compartments,(t=>t.height)),e.dividers=[];var n=3*t.padding;for(var i of e.compartments)i.x=0,i.y=n,i.width=e.width,n+=i.height,i!=o(e.compartments)&&e.dividers.push([{x:t.padding,y:n},{x:e.width-t.padding,y:n}])},class:f,database:function(t,e){e.width=Math.max(...e.compartments.map((t=>t.width))),e.height=r(e.compartments,(t=>t.height))+2*t.padding,e.dividers=[];var n=1.5*t.padding;for(var a of e.compartments)if(a.x=0,a.y=n,a.width=e.width,n+=a.height,a!=o(e.compartments)){var s=i([0,Math.PI],16).map((i=>({x:.5*e.width*(1-Math.cos(i)),y:n+t.padding*(.75*Math.sin(i)-.5)})));e.dividers.push(s)}},ellipse:function(t,e){var n=Math.max(...e.compartments.map((t=>t.width))),i=r(e.compartments,(t=>t.height));e.width=1.25*n,e.height=1.25*i,e.dividers=[];var a=.125*i,s=t=>t*t,h=t=>Math.sqrt(s(.5)-s(t/e.height-.5))*e.width;for(var l of e.compartments)l.x=.125*n,l.y=a,l.width=n,a+=l.height,l!=o(e.compartments)&&e.dividers.push([{x:e.width/2+h(a)-1,y:a},{x:e.width/2-h(a)+1,y:a}])},end:y,frame:function(t,e){var n=e.compartments[0].width,i=e.compartments[0].height;e.compartments[0].width+=i/2,f(0,e),e.dividers.length&&e.dividers.shift(),e.dividers.unshift([{x:0,y:i},{x:n-i/4,y:i},{x:n+i/4,y:i/2},{x:n+i/4,y:0}])},hidden:function(t,e){e.dividers=[],e.compartments=[],e.width=1,e.height=1},input:f,lollipop:p,none:f,note:f,package:f,receiver:f,rhomb:function(t,e){var n=Math.max(...e.compartments.map((t=>t.width))),i=r(e.compartments,(t=>t.height));e.width=1.5*n,e.height=1.5*i,e.dividers=[];var a=.25*i;for(var s of e.compartments){s.x=.25*n,s.y=a,s.width=n,a+=s.height;var h=e.width/e.height;s!=o(e.compartments)&&e.dividers.push([{x:e.width/2+(a<e.height/2?a*h:(e.height-a)*h),y:a},{x:e.width/2-(a<e.height/2?a*h:(e.height-a)*h),y:a}])}},roundrect:f,sender:f,socket:p,start:y,sync:function(t,e){e.dividers=[],e.compartments=[],"LR"==t.direction?(e.width=3*t.lineWidth,e.height=5*t.fontSize):(e.width=5*t.fontSize,e.height=3*t.lineWidth)},table:function(t,e){if(1!=e.compartments.length){var n,i,r=e.compartments.slice(1),a=[[]];for(var s of r)s==o(r)||((i=s).lines.length||i.nodes.length||i.relations.length)||!o(a).length?(n=void 0,n=o(a),a[0]!=n&&a[0].length==n.length?a.push([s]):o(a).push(s)):a.push([]);var h=e.compartments[0],l=Math.max(h.width/a[0].length,...r.map((t=>t.width))),c=Math.max(...r.map((t=>t.height)));e.width=l*a[0].length,e.height=h.height+c*a.length;var u=h.height;e.dividers=[[{x:0,y:h.height},{x:0,y:h.height}],...a.map(((t,n)=>[{x:0,y:u+n*c},{x:e.width,y:u+n*c}])),...a[0].map(((t,n)=>[{x:(n+1)*l,y:u},{x:(n+1)*l,y:e.height}]))],h.x=0,h.y=0,h.width=e.width;for(var d=0;d<a.length;d++)for(var y=0;y<a[d].length;y++){var p=a[d][y];p.x=y*l,p.y=u+d*c,p.width=l}}else f(0,e)},transceiver:f},m={actor:function(t,e,n,i,r){var o=i.padding/2,a=n+4*o,s={x:t.x,y:a-o};r.circle(s,o).fillAndStroke(),r.path([{x:t.x,y:a},{x:t.x,y:a+2*o}]).stroke(),r.path([{x:t.x-o,y:a+o},{x:t.x+o,y:a+o}]).stroke(),r.path([{x:t.x-o,y:a+o+i.padding},{x:t.x,y:a+i.padding},{x:t.x+o,y:a+o+i.padding}]).stroke()},class:function(t,e,n,i,r){r.rect(e,n,t.width,t.height).fillAndStroke()},database:function(t,e,n,i,r){var o=i.padding,a=n-o/2;r.rect(e,n+o,t.width,t.height-1.5*o).fill(),r.path([{x:e,y:a+1.5*o},{x:e,y:a-.5*o+t.height}]).stroke(),r.path([{x:e+t.width,y:a+1.5*o},{x:e+t.width,y:a-.5*o+t.height}]).stroke(),r.ellipse({x:t.x,y:a+1.5*o},t.width,1.5*o).fillAndStroke(),r.ellipse({x:t.x,y:a-.5*o+t.height},t.width,1.5*o,0,3.1416).fillAndStroke()},ellipse:function(t,e,n,i,r){r.ellipse({x:t.x,y:t.y},t.width,t.height).fillAndStroke()},end:function(t,e,n,i,r){r.circle({x:t.x,y:n+t.height/2},t.height/3).fillAndStroke(),r.fillStyle(i.stroke),r.circle({x:t.x,y:n+t.height/2},t.height/3-i.padding/2).fill()},frame:function(t,e,n,i,r){r.rect(e,n,t.width,t.height).fillAndStroke()},hidden:function(t,e,n,i,r){},input:function(t,e,n,i,r){r.circuit([{x:e+i.padding,y:n},{x:e+t.width,y:n},{x:e+t.width-i.padding,y:n+t.height},{x:e,y:n+t.height}]).fillAndStroke()},lollipop:function(t,e,n,i,r){r.circle({x:t.x,y:n+t.height/2},t.height/2.5).fillAndStroke()},none:function(t,e,n,i,r){},note:function(t,e,n,i,r){r.circuit([{x:e,y:n},{x:e+t.width-i.padding,y:n},{x:e+t.width,y:n+i.padding},{x:e+t.width,y:n+t.height},{x:e,y:n+t.height},{x:e,y:n}]).fillAndStroke(),r.path([{x:e+t.width-i.padding,y:n},{x:e+t.width-i.padding,y:n+i.padding},{x:e+t.width,y:n+i.padding}]).stroke()},package:function(t,e,n,i,r){var o=t.compartments[0].height;r.rect(e,n+o,t.width,t.height-o).fillAndStroke();var a=r.measureText(t.name).width+2*i.padding;r.circuit([{x:e,y:n+o},{x:e,y:n},{x:e+a,y:n},{x:e+a,y:n+o}]).fillAndStroke()},receiver:function(t,e,n,i,r){r.circuit([{x:e-i.padding,y:n},{x:e+t.width,y:n},{x:e+t.width,y:n+t.height},{x:e-i.padding,y:n+t.height},{x:e,y:n+t.height/2}]).fillAndStroke()},rhomb:function(t,e,n,i,r){r.circuit([{x:t.x,y:n},{x:e+t.width,y:t.y},{x:t.x,y:n+t.height},{x:e,y:t.y}]).fillAndStroke()},roundrect:function(t,e,n,i,r){var o=Math.min(2*i.padding*i.leading,t.height/2);r.roundRect(e,n,t.width,t.height,o).fillAndStroke()},sender:function(t,e,n,i,r){r.circuit([{x:e,y:n},{x:e+t.width-i.padding,y:n},{x:e+t.width,y:n+t.height/2},{x:e+t.width-i.padding,y:n+t.height},{x:e,y:n+t.height}]).fillAndStroke()},socket:function(t,e,n,i,r){var o="TB"===i.direction?Math.PI:Math.PI/2,a="TB"===i.direction?2*Math.PI:-Math.PI/2;r.ellipse({x:t.x,y:t.y},t.width,t.height,o,a).stroke()},start:function(t,e,n,i,r){r.fillStyle(i.stroke),r.circle({x:t.x,y:n+t.height/2},t.height/2.5).fill()},sync:function(t,e,n,i,r){r.fillStyle(i.stroke),r.rect(e,n,t.width,t.height).fillAndStroke()},table:function(t,e,n,i,r){r.rect(e,n,t.width,t.height).fillAndStroke()},transceiver:function(t,e,n,i,r){r.circuit([{x:e-i.padding,y:n},{x:e+t.width-i.padding,y:n},{x:e+t.width,y:n+t.height/2},{x:e+t.width-i.padding,y:n+t.height},{x:e-i.padding,y:n+t.height},{x:e,y:n+t.height/2}]).fillAndStroke()}};function x(t,n,i){function r(i,c,u){var f,y,p,m,x=(p=i.lines,m=c?"normal":"bold",p.length?(t.setFont(n,m,null),{width:Math.round(Math.max(...p.map(t.textWidth))+2*n.padding),height:Math.round(t.textHeight()*p.length+2*n.padding)}):{width:0,height:n.padding});if(!i.nodes.length&&!i.relations.length)return i.width=x.width,i.height=x.height,void(i.offset={x:n.padding,y:n.padding});var v=Object.assign(Object.assign({},n),{direction:null!==(f=u.direction)&&void 0!==f?f:n.direction});i.nodes.forEach((t=>function(t,e){var n=e.styles[t.type]||d.CLASS;t.compartments.forEach((function(t,e){r(t,e,n)})),g[n.visual](e,t),t.layoutWidth=t.width+2*e.edgeMargin,t.layoutHeight=t.height+2*e.edgeMargin}(t,v)));var w=new e.graphlib.Graph;for(var k of(w.setGraph({rankdir:u.direction||n.direction,nodesep:n.spacing,edgesep:n.spacing,ranksep:n.spacing,acyclicer:n.acyclicer,ranker:n.ranker}),i.nodes))w.setNode(k.name,{width:k.layoutWidth,height:k.layoutHeight});for(var b of i.relations)b.assoc.indexOf("_")>-1?w.setEdge(b.start,b.end,{id:b.id,minlen:0}):1!=(null!==(y=n.gravity)&&void 0!==y?y:1)?w.setEdge(b.start,b.end,{id:b.id,minlen:n.gravity}):w.setEdge(b.start,b.end,{id:b.id});e.layout(w);var S=h(i.relations,"id"),_=h(i.nodes,"name");w.nodes().forEach((function(t){var e=w.node(t);_[t].x=e.x,_[t].y=e.y}));var A=0,E=0,T=0,L=0;w.edges().forEach((function(t){var e=w.edge(t),n=_[t.v],i=_[t.w],r=S[e.id];r.path=[n,...e.points,i].map(o);var h=r.path[1],c=r.path[r.path.length-2];a(r.startLabel,h,l(s(h,n,4),n,i)),a(r.endLabel,c,l(s(c,i,2),i,n)),A=Math.min(A,r.startLabel.x,r.endLabel.x,...e.points.map((t=>t.x)),...e.points.map((t=>t.x))),E=Math.max(E,r.startLabel.x+r.startLabel.width,r.endLabel.x+r.endLabel.width,...e.points.map((t=>t.x))),T=Math.min(T,r.startLabel.y,r.endLabel.y,...e.points.map((t=>t.y))),L=Math.max(L,r.startLabel.y+r.startLabel.height,r.endLabel.y+r.endLabel.height,...e.points.map((t=>t.y)))}));var M=w.graph(),P=Math.max(M.width,E-A),I=Math.max(M.height,L-T),z=I?I+2*n.gutter:0,$=P?P+2*n.gutter:0;i.width=Math.max(x.width,$)+2*n.padding,i.height=x.height+z+n.padding,i.offset={x:n.padding-A,y:n.padding-T}}function o(t){return{x:t.x,y:t.y}}function a(e,i,r){if(e.text){var o=n.fontSize,a=e.text.split("`");e.width=Math.max(...a.map((function(e){return t.textWidth(e)}))),e.height=o*a.length,e.x=i.x+(1==r||4==r?n.padding:-e.width-n.padding),e.y=i.y+(3==r||4==r?n.padding:-e.height-n.padding)}else e.width=0,e.height=0,e.x=i.x,e.y=i.y}function s(t,e,n){return t.x<e.x&&t.y<e.y?1:t.x>e.x&&t.y<e.y?2:t.x>e.x&&t.y>e.y?3:t.x<e.x&&t.y>e.y?4:n}function l(t,e,i){if(i.x==e.x||i.y==e.y)return t;if((i.y<e.y?i.x<e.x?2:1:i.x<e.x?3:4)===t){if("LR"===n.direction)return[4,3,2,1][t-1];if("TB"===n.direction)return[2,1,4,3][t-1]}return t}return r(i,0,d.CLASS),i}class v{constructor(t,e,n){this.lines=t,this.nodes=e,this.relations=n}}class w{constructor(t,e,n){this.type=t,this.name=e,this.compartments=n,this.dividers=[]}}var k=function(){var t=function(t,e,n,i){for(n=n||{},i=t.length;i--;n[t[i]]=e);return n},e=[1,5],n=[1,8],i=[5,6,12,14],r=[12,14],o=[1,22],a={trace:function(){},yy:{},symbols_:{error:2,root:3,compartment:4,EOF:5,SEP:6,slot:7,IDENT:8,class:9,association:10,parts:11,"|":12,"[":13,"]":14,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"SEP",8:"IDENT",12:"|",13:"[",14:"]"},productions_:[0,[3,2],[3,3],[3,4],[3,3],[7,1],[7,1],[7,1],[4,1],[4,3],[11,1],[11,3],[11,2],[10,3],[9,3]],performAction:function(t,e,n,i,r,o,a){var s=o.length-1;switch(r){case 1:case 2:return o[s-1];case 3:case 4:return o[s-2];case 5:this.$=o[s].trim().replace(/\\(\[|\]|\|)/g,"$1");break;case 6:case 7:this.$=o[s];break;case 8:case 10:this.$=[o[s]];break;case 9:this.$=o[s-2].concat(o[s]);break;case 11:this.$=o[s-2].concat([o[s]]);break;case 12:this.$=o[s-1].concat([[]]);break;case 13:var h=o[s-1].trim().replace(/\\(\[|\]|\|)/g,"$1").match("^(.*?)([)<:o+(]*[-_]/?[-_]*[):o+>(]*)(.*)$");if(!h)throw new Error("line "+a[s].first_line+": Classifiers must be separated by a relation or a line break");this.$={assoc:h[2],start:o[s-2],end:o[s],startLabel:h[1].trim(),endLabel:h[3].trim()};break;case 14:var l="CLASS",c=o[s-1][0][0],u=o[s-1][0][0].match("<([a-z]*)>(.*)");u&&(l=u[1].toUpperCase(),c=u[2].trim()),o[s-1][0][0]=c,this.$={type:l,id:c,parts:o[s-1]}}},table:[{3:1,4:2,6:[1,3],7:4,8:e,9:6,10:7,13:n},{1:[3]},{5:[1,9],6:[1,10]},{4:11,7:4,8:e,9:6,10:7,13:n},t(i,[2,8]),t(i,[2,5]),t(i,[2,6],{8:[1,12]}),t(i,[2,7]),{4:14,7:4,8:e,9:6,10:7,11:13,13:n},{1:[2,1]},{5:[1,15],7:16,8:e,9:6,10:7,13:n},{5:[1,17],6:[1,18]},{9:19,13:n},{12:[1,21],14:[1,20]},t(r,[2,10],{6:o}),{1:[2,4]},t(i,[2,9]),{1:[2,2]},{5:[1,23],7:16,8:e,9:6,10:7,13:n},t(i,[2,13]),t([5,6,8,12,14],[2,14]),t(r,[2,12],{7:4,9:6,10:7,4:24,8:e,13:n}),{7:16,8:e,9:6,10:7,13:n},{1:[2,3]},t(r,[2,11],{6:o})],defaultActions:{9:[2,1],15:[2,4],17:[2,2],23:[2,3]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],i=[null],r=[],o=this.table,a="",s=0,h=0,l=2,c=1,u=r.slice.call(arguments,1),d=Object.create(this.lexer),f={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(f.yy[y]=this.yy[y]);d.setInput(t,f.yy),f.yy.lexer=d,f.yy.parser=this,void 0===d.yylloc&&(d.yylloc={});var p=d.yylloc;r.push(p);var g=d.options&&d.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var m,x,v,w,k,b,S,_,A=function(){var t;return"number"!=typeof(t=d.lex()||c)&&(t=e.symbols_[t]||t),t},E={};;){if(x=n[n.length-1],this.defaultActions[x]?v=this.defaultActions[x]:(null==m&&(m=A()),v=o[x]&&o[x][m]),void 0===v||!v.length||!v[0]){var T="";for(k in _=[],o[x])this.terminals_[k]&&k>l&&_.push("'"+this.terminals_[k]+"'");T=d.showPosition?"Parse error on line "+(s+1)+":\n"+d.showPosition()+"\nExpecting "+_.join(", ")+", got '"+(this.terminals_[m]||m)+"'":"Parse error on line "+(s+1)+": Unexpected "+(m==c?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(T,{text:d.match,token:this.terminals_[m]||m,line:d.yylineno,loc:p,expected:_})}if(v[0]instanceof Array&&v.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+m);switch(v[0]){case 1:n.push(m),i.push(d.yytext),r.push(d.yylloc),n.push(v[1]),m=null,h=d.yyleng,a=d.yytext,s=d.yylineno,p=d.yylloc;break;case 2:if(b=this.productions_[v[1]][1],E.$=i[i.length-b],E._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},g&&(E._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),void 0!==(w=this.performAction.apply(E,[a,h,s,f.yy,v[1],i,r].concat(u))))return w;b&&(n=n.slice(0,-1*b*2),i=i.slice(0,-1*b),r=r.slice(0,-1*b)),n.push(this.productions_[v[1]][0]),i.push(E.$),r.push(E._$),S=o[n[n.length-2]][n[n.length-1]],n.push(S);break;case 3:return!0}}return!0}},s={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in r)this[o]=r[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length;o++)if((n=this._input.match(this.rules[r[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,i=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,r[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,r[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,i){switch(n){case 0:return 12;case 1:return 8;case 2:return 13;case 3:return 14;case 4:return 6;case 5:return 5;case 6:return"INVALID"}},rules:[/^(?:\s*\|\s*)/,/^(?:(\\(\[|\]|\|)|[^\]\[|;\n])+)/,/^(?:\[)/,/^(?:\s*\])/,/^(?:[ ]*(;|\n)+[ ]*)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6],inclusive:!0}}};function h(){this.yy={}}return a.lexer=s,h.prototype=a,a.Parser=h,new h}();function b(t){var e=t.split("\n").map((function(t,e){return{text:t,index:e}})),n=e.filter((function(t){return"#"===t.text[0]})),i={};n.forEach((function(t){try{var e=t.text.substring(1).split(":");i[e[0].trim()]=e[1].trim()}catch(e){throw new Error("line "+(t.index+1)+": Malformed directive")}}));var r=e.map((t=>{return"#"!==(e=t.text)[0]&&"//"!==e.trim().substring(0,2)?e.trim():"";var e})).join("\n");return""==r?{root:new v([],[],[]),config:c(i)}:{root:_(S(r)),config:c(i)};function h(t){return"down"==t?"TB":"right"==t?"LR":"TB"}function l(t){var e=a,n=t.replace(/[a-z]*=[^ ]+/g,""),i=o(t.match("title=([^ ]*)")||[""]),r=o(t.match("body=([^ ]*)")||[""]);return{title:{bold:e(i,"bold")||e(n,"bold"),underline:e(i,"underline")||e(n,"underline"),italic:e(i,"italic")||e(n,"italic"),center:!(e(i,"left")||e(t,"align=left"))},body:{bold:e(r,"bold"),underline:e(r,"underline"),italic:e(r,"italic"),center:e(r,"center")},dashed:e(t,"dashed"),fill:o(t.match("fill=([^ ]*)")||[]),stroke:o(t.match("stroke=([^ ]*)")||[]),visual:o(t.match("visual=([^ ]*)")||[])||"class",direction:h(o(t.match("direction=([^ ]*)")||[]))}}function c(t){var e,n,i={};for(var r in t)if("."==r[0]){var o=t[r];i[r.substring(1).toUpperCase()]=l(o)}return{arrowSize:+t.arrowSize||1,bendSize:+t.bendSize||.3,direction:h(t.direction),gutter:+t.gutter||20,edgeMargin:+t.edgeMargin||0,gravity:+(null!==(e=t.gravity)&&void 0!==e?e:1),edges:"hard"==t.edges?"hard":"rounded",fill:(t.fill||"#eee8d5;#fdf6e3;#eee8d5;#fdf6e3").split(";"),background:t.background||"transparent",fillArrows:"true"===t.fillArrows,font:t.font||"Helvetica",fontSize:+t.fontSize||12,leading:+t.leading||1.25,lineWidth:+t.lineWidth||3,padding:+t.padding||8,spacing:+t.spacing||40,stroke:t.stroke||"#33322E",title:t.title||"",zoom:+t.zoom||1,acyclicer:"greedy"===t.acyclicer?"greedy":void 0,ranker:(n=t.ranker,"network-simplex"==n||"tight-tree"==n||"longest-path"==n?n:"network-simplex"),styles:s(d,i)}}}function S(t){return k.parse(t)}function _(t){var e=0;function n(t){var n=[],r=[],o=[];t.forEach((function(t){"string"==typeof t&&n.push(t),void 0!==t.assoc&&(r.push(t.start),r.push(t.end),o.push({id:e++,assoc:t.assoc,start:t.start.parts[0][0],end:t.end.parts[0][0],startLabel:{text:t.startLabel},endLabel:{text:t.endLabel}})),function(t){return void 0!==t.parts}(t)&&r.push(t)}));var a=l(r.map(i).sort((function(t,e){return e.compartments.length-t.compartments.length})),"name"),s=o.filter((function(t){for(var e of o){if(t===e)return!0;if(e.start==t.start&&e.end==t.end)return!1}return!0}));return new v(n,a,s)}function i(t){var e=t.parts.map(n);return new w(t.type,t.id,e)}return n(t)}function A(t,e){return{x:t.x+e.x,y:t.y+e.y}}function E(t,e){return{x:t.x-e.x,y:t.y-e.y}}function T(t,e){return{x:e*t.x,y:e*t.y}}function L(t){return T(t,1/function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}(t))}function M(t){return{x:t.y,y:-t.x}}const P=!1;function I(t){return">"===t||"<"===t?5:":>"===t||"<:"===t?10:"+"===t||"o"===t?14:"("===t||")"===t||"(o"===t||"o)"===t?11:">o"===t||"o<"===t?15:0}function z(t,e,n,r){var s=t;function h(t,n,u,f){s.save(),s.translate(t.offset.x,t.offset.y),s.fillStyle(n||e.stroke),t.lines.forEach((function(n,i){s.textAlign(u.center?"center":"left");var r=u.center?t.width/2-e.padding:0,o=(.5+(i+.5)*e.leading)*e.fontSize;if(n&&s.fillText(n,r,o),u.underline){var a=s.measureText(n).width;o+=Math.round(.2*e.fontSize)+.5,u.center?s.path([{x:r-a/2,y:o},{x:r+a/2,y:o}]).stroke():s.path([{x:r,y:o},{x:r+a,y:o}]).stroke(),s.lineWidth(e.lineWidth)}})),s.translate(e.gutter,e.gutter),t.relations.forEach((function(t){!function(t){var n=function(t,e){var n=e.path.slice(1,-1),i=L(E(n[n.length-2],o(n))),r=L(E(n[1],n[0])),a=t.spacing*t.arrowSize/30,s=n.length-1,h=n.map((t=>({x:t.x,y:t.y}))),l=e.assoc.split(/[-_]/);return h[0]=A(h[0],T(r,a*I(l[0]))),h[s]=A(h[s],T(i,a*I(o(l)))),h}(e,t);if(s.fillStyle(e.stroke),r(e,"normal",null),c(t.startLabel),c(t.endLabel),"-/-"!==t.assoc&&"_/_"!==t.assoc)if(a(t.assoc,"--")||a(t.assoc,"__")){var h=Math.max(4,2*e.lineWidth);s.setLineDash([h,h]),l(n),s.setLineDash([])}else l(n);!function(t,e,n){var r=n.path[1],a=n.path[n.path.length-2],s=n.path.slice(1,-1),h=n.assoc.split(/[-_]/);function l(t,n,i){var r=L(E(n[n.length-2],o(n))),a=e.spacing*e.arrowSize/30;">"===t||"<"===t?f(r,a,!0,i):":>"===t||"<:"===t?f(r,a,P,i):"+"===t?y(r,a,!0,i):"o"===t?y(r,a,P,i):"("===t||")"===t?(d(r,a,11,i),u(r,a,5,i)):"(o"===t||"o)"===t?(d(r,a,11,i),u(r,a,5,i),c(r,a,11,i)):">o"!==t&&"o<"!==t||(f(r,.75*a,P,A(i,T(r,10*a))),u(r,a,8,i),c(r,a,8,i))}function c(n,i,r,o){var a=A(o,T(n,i*r));t.fillStyle(e.fill[0]),t.ellipse(a,6*i,6*i).fillAndStroke()}function u(e,n,i,r){var o=A(r,T(e,n*i));t.path([o,r]).stroke()}function d(e,n,r,o){var a=A(o,T(e,n*r)),s=M(e),h=i([-Math.PI/2,Math.PI/2],12).map((t=>A(a,A(T(e,-6*n*Math.cos(t)),T(s,6*n*Math.sin(t))))));t.path(h).stroke()}function f(n,i,r,o){const a=t=>A(o,T(n,t*i)),s=t=>T(M(n),t*i);var h=[A(a(10),s(4)),a(r&&!e.fillArrows?5:10),A(a(10),s(-4)),o];t.fillStyle(r?e.stroke:e.fill[0]),t.circuit(h).fillAndStroke()}function y(n,i,r,o){const a=t=>A(o,T(n,t*i)),s=t=>T(M(n),t*i);var h=[A(a(7),s(4)),a(14),A(a(7),s(-4)),o];t.fillStyle(r?e.stroke:e.fill[0]),t.circuit(h).fillAndStroke()}l(o(h),s,a),l(h[0],s.reverse(),r)}(s,e,t)}(t)})),t.nodes.forEach((function(t){!function(t,n){var i=Math.round(t.x-t.width/2),a=Math.round(t.y-t.height/2),l=e.styles[t.type]||d.CLASS;if(s.fillStyle(l.fill||e.fill[n]||o(e.fill)),s.strokeStyle(l.stroke||e.stroke),l.dashed){var c=Math.max(4,2*e.lineWidth);s.setLineDash([c,c])}s.setData("name",t.name);var u=m[l.visual]||m.class;for(var f of(u(t,i,a,e,s),s.translate(i,a),t.dividers))s.path(f).stroke();s.translate(-i,-a),s.setLineDash([]),s.save(),s.translate(i,a),t.compartments.forEach((function(t,i){var o=0==i?l.title:l.body;s.save(),s.translate(t.x,t.y),r(e,o.bold?"bold":"normal",o.italic?"italic":null),h(t,l.stroke,o,n+1),s.restore()})),s.restore()}(t,f)})),s.restore()}function l(t){if("rounded"===e.edges){var n=e.spacing*e.bendSize;s.beginPath(),s.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length-1;i++)s.arcTo(t[i].x,t[i].y,t[i+1].x,t[i+1].y,n);s.lineTo(o(t).x,o(t).y),s.stroke()}else s.path(t).stroke()}function c(t){if(t&&t.text){var n=e.fontSize;t.text.split("`").forEach(((e,i)=>s.fillText(e,t.x,t.y+n*(i+1))))}}s.save(),s.scale(e.zoom,e.zoom),s.clear(),s.save(),s.strokeStyle("transparent"),s.fillStyle(e.background),s.rect(0,0,n.width,n.height).fill(),s.restore(),r(e,"bold",null),s.lineWidth(e.lineWidth),s.lineJoin("round"),s.lineCap("round"),s.strokeStyle(e.stroke),e.lineWidth%2==1&&s.translate(.5,.5),h(n,void 0,u({},{}).title,0),s.restore()}function $(t){return(null!=t?t:"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}var C={0:10,1:10,2:10,3:10,4:10,5:10,6:10,7:10,8:10,9:10," ":5,"!":5,'"':6,"#":10,$:10,"%":15,"&":11,"'":4,"(":6,")":6,"*":7,"+":10,",":5,"-":6,".":5,"/":5,":":5,";":5,"<":10,"=":10,">":10,"?":10,"@":17,A:11,B:11,C:12,D:12,E:11,F:10,G:13,H:12,I:5,J:9,K:11,L:10,M:14,N:12,O:13,P:11,Q:13,R:12,S:11,T:10,U:12,V:11,W:16,X:11,Y:11,Z:10,"[":5,"\\":5,"]":5,"^":8,_:10,"`":6,a:10,b:10,c:9,d:10,e:10,f:5,g:10,h:10,i:4,j:4,k:9,l:4,m:14,n:10,o:10,p:10,q:10,r:6,s:9,t:5,u:10,v:9,w:12,x:9,y:9,z:9,"{":6,"|":5,"}":6,"~":10};function R(t,e,n,i){var r=b(t),o=r.config,a=function(t,e){return{setFont(n,i,r){e.setFont(n.font,i,null!=r?r:null,t.fontSize)},textWidth:function(t){return e.measureText(t).width},textHeight:function(){return t.leading*t.fontSize}}}(o,e),s=x(a,o,r.root);return n&&function(t,e,n){t.width=e.width*n,t.height=e.height*n}(n,s,o.zoom*i),o.zoom*=i,z(e,o,s,a.setFont),{config:o,layout:s}}class W extends Error{constructor(){super("max_import_depth exceeded")}}function O(t,e,n=10){if(-1==n)throw new W;return t.replace(/#import: *(.*)/g,(function(t,i){return O(function(t){try{return e(t)||""}catch(t){return""}}(i),e,n-1)}))}t.Classifier=w,t.Compartment=v,t.ImportDepthError=W,t.Relation=class{},t.compileFile=function(t,e){var n=require("fs"),i=require("path"),r=i.dirname(t);function o(t){return n.readFileSync(i.join(r,t),{encoding:"utf8"})}return O(o(t.substr(r.length)),o,e)},t.draw=function(t,e,n){return R(e,function(t,e){var n=t.getContext("2d"),i={x:0,y:0},r=6.2832;function o(e){var n=t;return{x:e.clientX-n.getBoundingClientRect().left-n.clientLeft+n.scrollLeft,y:e.clientY-n.getBoundingClientRect().top-n.clientTop+n.scrollTop}}e&&(t.addEventListener("mousedown",(function(t){e.mousedown&&e.mousedown(o(t))})),t.addEventListener("mouseup",(function(t){e.mouseup&&e.mouseup(o(t))})),t.addEventListener("mousemove",(function(t){i=o(t),e.mousemove&&e.mousemove(o(t))})));var a={stroke:function(){return n.stroke(),a},fill:function(){return n.fill(),a},fillAndStroke:function(){return n.fill(),n.stroke(),a}};function s(t,e,i){i=void 0===i?1:i,e=e||{x:0,y:0},n.beginPath(),n.moveTo(e.x+i*t[0].x,e.y+i*t[0].y);for(var r=1,o=t.length;r<o;r++)n.lineTo(e.x+i*t[r].x,e.y+i*t[r].y);return a}return{mousePos:function(){return i},width:function(){return t.width},height:function(){return t.height},clear:function(){n.clearRect(0,0,t.width,t.height)},circle:function(t,e){return n.beginPath(),n.arc(t.x,t.y,e,0,r),a},ellipse:function(t,e,i,o,s){return void 0===o&&(o=0),void 0===s&&(s=r),n.beginPath(),n.save(),n.translate(t.x,t.y),n.scale(1,i/e),n.arc(0,0,e/2,o,s),n.restore(),a},arc:function(t,e,i,r,o){return n.beginPath(),n.moveTo(t,e),n.arc(t,e,i,r,o),a},roundRect:function(t,e,i,r,o){return n.beginPath(),n.moveTo(t+o,e),n.arcTo(t+i,e,t+i,e+o,o),n.lineTo(t+i,e+r-o),n.arcTo(t+i,e+r,t+i-o,e+r,o),n.lineTo(t+o,e+r),n.arcTo(t,e+r,t,e+r-o,o),n.lineTo(t,e+o),n.arcTo(t,e,t+o,e,o),n.closePath(),a},rect:function(t,e,i,r){return n.beginPath(),n.moveTo(t,e),n.lineTo(t+i,e),n.lineTo(t+i,e+r),n.lineTo(t,e+r),n.closePath(),a},path:s,circuit:function(t,e,i){return s(t,e,i),n.closePath(),a},setFont:function(t,e,i,r){n.font=`${e} ${i||""} ${r}pt ${t}, Helvetica, sans-serif`},fillStyle:function(t){n.fillStyle=t},strokeStyle:function(t){n.strokeStyle=t},textAlign:function(t){n.textAlign=t},lineCap:function(t){n.lineCap=t},lineJoin:function(t){n.lineJoin=t},lineWidth:function(t){n.lineWidth=t},arcTo:function(){return n.arcTo.apply(n,arguments)},beginPath:function(){return n.beginPath.apply(n,arguments)},fillText:function(){return n.fillText.apply(n,arguments)},lineTo:function(){return n.lineTo.apply(n,arguments)},measureText:function(){return n.measureText.apply(n,arguments)},moveTo:function(){return n.moveTo.apply(n,arguments)},restore:function(){return n.restore.apply(n,arguments)},setData:function(t,e){},save:function(){return n.save.apply(n,arguments)},scale:function(){return n.scale.apply(n,arguments)},setLineDash:function(){return n.setLineDash.apply(n,arguments)},stroke:function(){return n.stroke.apply(n,arguments)},translate:function(){return n.translate.apply(n,arguments)}}}(t),t,n||1)},t.intermediateParse=S,t.layout=x,t.parse=b,t.processAsyncImports=function t(e,i,r=10){return n(this,void 0,void 0,(function*(){if(-1==r)throw new W;var o=[];e.replace(/#import: *(.*)/g,(function(e,a){var s=function(t){return n(this,void 0,void 0,(function*(){try{return(yield i(t))||""}catch(t){return""}}))}(a).then((e=>t(e,i,r-1)));return o.push({file:a,promise:s}),""}));var a={};for(var s of o)a[s.file]=yield s.promise;return e.replace(/#import: *(.*)/g,(function(t,e){return a[e]}))}))},t.processImports=O,t.renderSvg=function(t,e){var n=function(t,e){var n=[{x:0,y:0,stroke:"none",strokeWidth:1,dashArray:"none",fill:"none",textAlign:"left",font:"Helvetica, Arial, sans-serif",fontSize:12,attributes:{}}],o=[],a=e?e.createElement("canvas"):null,s=a?a.getContext("2d"):null;class h{constructor(t,e,n){this.name=t,this.attr=e,this.content=n||void 0}stroke(){var t=this.attr.style||"";return this.attr.style=t+"stroke:"+d("stroke")+";fill:none;stroke-dasharray:"+d("dashArray")+";stroke-width:"+d("strokeWidth")+";",this}fill(){var t=this.attr.style||"";return this.attr.style=t+"stroke:none; fill:"+d("fill")+";",this}fillAndStroke(){var t=this.attr.style||"";return this.attr.style=t+"stroke:"+d("stroke")+";fill:"+d("fill")+";stroke-dasharray:"+d("dashArray")+";stroke-width:"+d("strokeWidth")+";",this}}function l(t,e){return n.forEach((function(n){t+=n[e]})),t}function c(t){return Math.round(10*l(t,"x"))/10}function u(t){return Math.round(10*l(t,"y"))/10}function d(t){for(var e=n.length-1;e>=0;e--)if(n[e][t])return n[e][t]}function f(t){return t[t.length-1]}function y(t,e={x:0,y:0},n=1){return p("path",{d:t.map((function(t,i){return(i?"L":"M")+c(e.x+n*t.x)+" "+u(e.y+n*t.y)})).join(" ")})}function p(t,e,n){var i=new h(t,e,n),r=d("attributes");for(var a in r)i.attr["data-"+a]=r[a];return o.push(i),i}return{width:function(){return 0},height:function(){return 0},clear:function(){},circle:function(t,e){return p("circle",{r:e,cx:c(t.x),cy:u(t.y)})},ellipse:function(t,e,n,r=0,o=0){return r||o?y(i([r,o],64).map((i=>A(t,{x:Math.cos(i)*e/2,y:Math.sin(i)*n/2})))):p("ellipse",{cx:c(t.x),cy:u(t.y),rx:e/2,ry:n/2})},arc:function(t,e,n){return p("ellipse",{cx:c(t),cy:u(e),rx:n,ry:n})},roundRect:function(t,e,n,i,r){return p("rect",{x:c(t),y:u(e),rx:r,ry:r,height:i,width:n})},rect:function(t,e,n,i){return p("rect",{x:c(t),y:u(e),height:i,width:n})},path:y,circuit:function(t,e,n){var i=y(t,e,n);return i.attr.d+=" Z",i},setFont:function(t,e,i,r){t=`${e} ${i||""} ${r}pt ${t}, Helvetica, sans-serif`,f(n).font=t,f(n).fontSize=r},strokeStyle:function(t){f(n).stroke=t},fillStyle:function(t){f(n).fill=t},arcTo:function(t,e,n,i){f(o).attr.d+="L"+c(t)+" "+u(e)+" L"+c(n)+" "+u(i)+" "},beginPath:function(){return p("path",{d:""})},fillText:function(t,e,i){var r={x:c(e),y:u(i),style:"fill: "+f(n).fill+";"},o=d("font");return o&&(r.style+="font:"+o+";"),"center"===d("textAlign")&&(r.style+="text-anchor: middle;"),p("text",r,t)},lineCap:function(e){t+=";stroke-linecap:"+e},lineJoin:function(e){t+=";stroke-linejoin:"+e},lineTo:function(t,e){return f(o).attr.d+="L"+c(t)+" "+u(e)+" ",f(o)},lineWidth:function(t){f(n).strokeWidth=t},measureText:function(t){return s?(s.font=d("font")||"normal 12pt Helvetica",s.measureText(t)):{width:r(t,(function(t){var e=d("fontSize")/12;return C[t]?C[t]*e:16*e}))}},moveTo:function(t,e){f(o).attr.d+="M"+c(t)+" "+u(e)+" "},restore:function(){n.pop()},save:function(){n.push({x:0,y:0,stroke:null,strokeWidth:null,fill:null,textAlign:null,dashArray:"none",font:null,fontSize:null,attributes:null})},setData:function(t,e){d("attributes")[t]=e},scale:function(){},setLineDash:function(t){f(n).dashArray=0===t.length?"none":t[0]+" "+t[1]},stroke:function(){f(o).stroke()},textAlign:function(t){f(n).textAlign=t},translate:function(t,e){f(n).x+=t,f(n).y+=e},serialize:function(e,n,i){function r(t){return Object.keys(t).map((e=>`${e}="${$(t[e])}"`)).join(" ")}var a=o;n&&a.unshift(new h("desc",{},n)),i&&a.unshift(new h("title",{},i));var s=a.map((function(t){return`<${t.name} ${r(t.attr)}>${$(t.content)}</${t.name}>`})).join("\n  ");return"<svg "+r({version:"1.1",baseProfile:"full",width:e.width,height:e.height,viewbox:"0 0 "+e.width+" "+e.height,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:ev":"http://www.w3.org/2001/xml-events",style:"font:"+d("font")+";"+t})+">\n  "+s+"\n</svg>"}}}("",e),{config:o,layout:a}=R(t,n,null,1);return n.serialize({width:a.width,height:a.height},t,o.title)},t.skanaar=c,t.styles=d,t.transformParseIntoSyntaxTree=_,t.version="1.4.0",t.visualizers=m,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=/sm/766adc4ec9bd5348d01e3545e8082960d8abb191ed73cf07a09a7b5629dab6bb.map